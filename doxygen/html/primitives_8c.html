<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Everest: kernel/arch/primitives.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Everest
   </div>
   <div id="projectbrief">*Everest* is a basic Unix-like operating system built for educational purposes.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_4a04b9aac4eefdd334a78e565f4616f2.html">arch</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">primitives.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="primitives_8h_source.html">arch/primitives.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for primitives.c:</div>
<div class="dyncontent">
<div class="center"><img src="primitives_8c__incl.png" border="0" usemap="#akernel_2arch_2primitives_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2bec548c1619329a6caa46677cff7dad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="primitives_8c.html#a2bec548c1619329a6caa46677cff7dad">_cli</a> (void)</td></tr>
<tr class="separator:a2bec548c1619329a6caa46677cff7dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e4684308feb04244f5ebc398b944eba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="primitives_8c.html#a2e4684308feb04244f5ebc398b944eba">_cpuid</a> (struct <a class="el" href="structproc__state.html">proc_state</a> *regs, uint32_t leaf)</td></tr>
<tr class="separator:a2e4684308feb04244f5ebc398b944eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a337bb2771921f06067aaffa8f56e2b8c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="primitives_8c.html#a337bb2771921f06067aaffa8f56e2b8c">_inb</a> (uint16_t port)</td></tr>
<tr class="separator:a337bb2771921f06067aaffa8f56e2b8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af28a640964fcad6dca19e9a3286aeda6"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="primitives_8c.html#af28a640964fcad6dca19e9a3286aeda6">_inw</a> (uint16_t port)</td></tr>
<tr class="separator:af28a640964fcad6dca19e9a3286aeda6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61ddbb9f75fe31d8af70d6354843d9aa"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="primitives_8c.html#a61ddbb9f75fe31d8af70d6354843d9aa">_ind</a> (uint16_t port)</td></tr>
<tr class="separator:a61ddbb9f75fe31d8af70d6354843d9aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a930446e7079616890873b6bdd8fdf135"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="primitives_8c.html#a930446e7079616890873b6bdd8fdf135">_rdtsc</a> (void)</td></tr>
<tr class="separator:a930446e7079616890873b6bdd8fdf135"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2bec548c1619329a6caa46677cff7dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bec548c1619329a6caa46677cff7dad">&#9670;&nbsp;</a></span>_cli()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _cli </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2e4684308feb04244f5ebc398b944eba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e4684308feb04244f5ebc398b944eba">&#9670;&nbsp;</a></span>_cpuid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_cpuid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structproc__state.html">proc_state</a> *&#160;</td>
          <td class="paramname"><em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>leaf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Executes the <code>CPUID</code> processor-identification instruction with the <code>leaf</code> argument placed in <code>EAX</code>. The <code>CPUID</code> instruction is used for determination of processor capabilities and features. Depending on the specific argument placed in <code>EAX</code> prior to execution, the <code>CPUID</code> instruction will return various elements of information. These can range from vendor identification strings (<code>EAX = 00h</code>) to complex bitwise-encoded flags about instruction sets and processor caching capabilities. Intel has published an entire 128-page application note on this subject; for more information, see Intel Corporation (2012) AP-485.</p>
<p>There are obscure ways to test for the presence of the <code>CPUID</code> instruction prior to executing it, a practice which should always be performed when potentially executing an instruction for which hardware support is not explicitly known at runtime. However, all modern x86 CPUs support this instruction, and the few that do not (early model 486s and earlier) are too historical to be supported by most operating systems and the presence of <code>CPUID</code> can safely be assumed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">regs</td><td>a pointer to an instance of a processor state struct to store the output of <code>CPUID</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">leaf</td><td>the argument supplied to the <code>CPUID</code> instruction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>struct <a class="el" href="structproc__state.html">proc_state</a> </dd></dl>

</div>
</div>
<a id="a337bb2771921f06067aaffa8f56e2b8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a337bb2771921f06067aaffa8f56e2b8c">&#9670;&nbsp;</a></span>_inb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_inb </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads and returns a byte value from the I/O bus location specified by <code>port</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="a61ddbb9f75fe31d8af70d6354843d9aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61ddbb9f75fe31d8af70d6354843d9aa">&#9670;&nbsp;</a></span>_ind()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_ind </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads and returns a doubleword (32-bit) value from the I/O bus location specified by <code>port</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="af28a640964fcad6dca19e9a3286aeda6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af28a640964fcad6dca19e9a3286aeda6">&#9670;&nbsp;</a></span>_inw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_inw </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads and returns a word (16-bit) value from the I/O bus location specified by <code>port</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="a930446e7079616890873b6bdd8fdf135"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a930446e7079616890873b6bdd8fdf135">&#9670;&nbsp;</a></span>_rdtsc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_rdtsc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the value of the x86 Time Stamp Counter (TSC) register (MSR 10h). Returns this value to the user as a 64-bit integer. This function is tagged naked to avoid the generation of function prologues and epilogues to improve accuracy when reading the TSC - both registers modified by <code>RDTSC</code> are volatile per the System V x86-64 ABI and no framing occurs within. </p><dl class="section see"><dt>See also</dt><dd></dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
